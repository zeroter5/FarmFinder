<!DOCTYPE html>
<html lang="en">
<head >

   <meta charset="utf-8">
   <title>Farm Finder - Search</title>
   <link rel="stylesheet" type = "text/css" href="searchForm.css" >
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script></head>
<body>
<header>
  <h1>FARM FINDER</h1>
  <nav>
    <ul>
    <center><a href="searchForm.html">Search</a>
    <a href="nearbyFarms.html">Farms Near Me</a>
    <a href="farmSignUp.html">Sign Up</a>
    <a href="farmProfile.html">Profile</a>
    <a href="cart.html">Cart</a></center>
    </ul> 
 </nav>
</header>
<main>
   <section>
    <div id = "searchQuery">
   	<form action="" method="post" id="form">
      <fieldset>
      <table>
        <tr>
          <td>
   		Food Type*: 
   		<select name = "type" id = "type" style="width:100%">
        <option value="Meat">Meat</option>
          <option value="Produce">Produce</option>
          <option value="Dairy">Dairy</option>
          <option value="Grain">Grain</option>
      </select>
          </td>
          <td>
            Price: <br>
            <select name = "price" id = "price" style="width:100%">
              <option value="none">None</option>
              <option value="Low to High">Low to High</option>
              <option value="High to Low">High to Low</option>
           </select>
          </td>
        </tr>
        <tr>
          <td>
   		Food Grade*:
   		<select name="grade" id="grade" style="width:100%">
        <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
          <option value="F">F</option>
      </select>
        </td>
        <td>
            Organic: 
            <select name="organic" id="organic" style="width:100%">
              <option value="Yes">Yes</option>
              <option value="No">No</option>
           </select>
          </td>
      </tr>
      <tr>
        <td>
        Supplier Name: <br>
        <input type="text" name="name" id="name" style="width:95%">
        </td>
        <td>
          <button  type="submit" id = "submit" class="button1" form="form" value="Submit" name="submit" style="width:50%">Submit</button>
        </td>
      </tr>
    </table>
   </form>
   </fieldset>
 </div>
<table id="myTable">
</table>

<div class="pagination">
</div>
</section>
<script>
 $(function() {
    $(".button1").click(function() {
      // validate and process form here
      var type = $("select#type").val();
      var grade = $("select#grade").val();
      var organic = $("select#organic").val();
      var price = $("select#price").val();
      var name = $("input#name").val();
      
      var submit = $("button#submit").val();
      var dataString = '&type='+ type +'&grade=' + grade + '&organic=' + organic + '&price=' + price + '&name=' + name + '&submit' + submit;
      //var id = 33;
    //alert (dataString);return false;
  $.ajax({
    type: "POST",
    url: "searchQuery.php",
    data: {submit:submit, type: type, grade:grade, organic:organic, price: price, name: name},
   success: function(data) {
    var myTable = document.getElementById('myTable');
    var tr = myTable.appendChild(document.createElement('tr'));
    var counter = 0;
      data = JSON.parse(data);
      for (i in data) {
          var tr = myTable.appendChild(document.createElement('tr'));
          var link = tr.appendChild(document.createElement('a'));
          if (counter == 0) {
          link.href = "http://localhost/oldBrownProfile.html";
          }
          else if(counter ==1) {
          link.href = "http://localhost/sunnyAcresProfile.html";

          }
          else {
          link.href = "http://localhost/herricksProfile.html";
          }
          link.innerHTML = i;
          tr.appendChild(link);
          counter = counter + 1; 
        for (key in data[i]){
            var td = tr.appendChild(document.createElement('td'));
            td.href = "http://localhost/.html";
            td.title = key;
            td.innerHTML = data[i][key];
           
        }
    }
  }

  });
  return false;
    });
  });
</script>

</main>  
<footer>
   <nav>
  <ul>
  <a href="contactReturns.html">Contact Information</a>
  <a href="contactReturns.html">Return/Exchange Policy</a>
  <a href="contactReturns.html">More Information</a>
  <a href="contactReturns.html">Customer Care</a>
  <a href="contactReturns.html">Placeholder</a>
  <a href="contactReturns.html">More Placeholders</a>
  </ul>
  </nav>
</footer>

</body>
</html>